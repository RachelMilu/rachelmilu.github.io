全球购 的坑：


1.测试配长链，屏幕不能划。。。
安卓机都存在在半价、全球购APP中页面无法下拉的情况
IOS中全球购的页面还是无法往下拉，半价正常

原因：
我的h5页面互相跳转时，上下划屏时用到hash；
咱们的跳转服务暂时不支持hash；
前端页面跳转几乎都含有hash，由于配好的链接会带有占位： ＃versio＃这种格式，影响了前端代码对hash的判断，导致前端页面滑动失效。

解决方案：
已把入口的链接的hash去掉。（跳转服务的同事等忙完了这阵会把hash支持功能加上去）
除此之外，全球购／半价／买家版app在配链接时需要配上http://api.m.koudai.com/jump/p.do?来调用跳转服务。否则version值丢失，分享功能会错乱（具体表现为点击“分享到微信”，弹出提示框“全球购想要打开口袋购物”，正常应该是直接唤起微信）





1.
微信里面长按识别二维码，只要二维码的图片用了top/left来定位的 就不能识别。。。

原因：据说是微信的webview不支持scale～而我的页面用了淘宝的flexible方案。。。各种sacle等于小数。。。


解决办法一：
暂时加上这个吧<meta name="flexible" content="initial-dpr=1,maximum-dpr=1" />
这是flexible 的源码 https://github.com/amfe/lib-flexible/edit/master/src/flexible.js
这个是别人写的解释的帖子：http://www.xiaoxiangzi.com/Programme/CSS/4298.html



解决办法二： 
不要用left right啦～父容器也不要～ 布局用padding就妥妥的可以识别。。。

2.微信这货。。。貌似在webview内部跳转，每次跳转都不缓存啊，完全主动刷新。。。。重新进去的时候呢又是主动使用缓存。。。

用了修改history的hash和判断hash，再手动滚动对应值，比较粗暴哇。。。

        var hash = window.location.hash.replace(/^#tp_/, '');
        var targetId = window.location.hash.replace(/^#tp_pinlei_/, '');
        var numTarget = Number(targetId);
        if(numTarget > -1){
            $('html,body').animate({
                scrollTop:$("*[id="+hash+"]").offset().top
            }, 800);
        }else{
            hash = window.location.hash.replace(/^#tp_pinlei_num/, '');

            setTimeout(function(){
                //window.scrollTo(0,hash);
                $('html,body').animate({
                    scrollTop:hash
                },500);
            },1000)
        }
